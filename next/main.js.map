{"version":3,"file":"main.js","mappings":"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","sources":["./apps/ide-ui/src/app/app.component.ts","./apps/ide-ui/src/app/app.component.html","./apps/ide-ui/src/app/app.module.ts","./apps/ide-ui/src/app/layout/layout.module.ts","./apps/ide-ui/src/app/layout/main/main.component.ts","./apps/ide-ui/src/app/layout/main/main.component.html","./apps/ide-ui/src/app/layout/menu/menu.component.ts","./apps/ide-ui/src/app/layout/menu/menu.component.html","./apps/ide-ui/src/app/routes/dev/dev.module.ts","./apps/ide-ui/src/app/routes/dev/list-changes/list-changes.component.ts","./apps/ide-ui/src/app/routes/dev/list-changes/list-changes.component.html","./apps/ide-ui/src/app/routes/editor/editor-element.ts","./apps/ide-ui/src/app/routes/editor/editor.module.ts","./apps/ide-ui/src/app/routes/editor/input-element/input-element.component.ts","./apps/ide-ui/src/app/routes/editor/input-element/input-element.component.html","./apps/ide-ui/src/app/routes/editor/main-editor/main-editor.component.ts","./apps/ide-ui/src/app/routes/editor/main-editor/main-editor.component.html","./apps/ide-ui/src/app/routes/editor/select-element/select-element.component.ts","./apps/ide-ui/src/app/routes/editor/select-element/select-element.component.html","./apps/ide-ui/src/app/routes/editor/sub-text-element/sub-text-element.component.ts","./apps/ide-ui/src/app/routes/editor/sub-text-element/sub-text-element.component.html","./apps/ide-ui/src/app/routes/editor/text-element/text-element.component.ts","./apps/ide-ui/src/app/routes/editor/text-element/text-element.component.html","./apps/ide-ui/src/app/routes/editor/text-handler/text-handler.component.ts","./apps/ide-ui/src/app/routes/editor/text-handler/text-handler.component.html","./apps/ide-ui/src/app/routes/welcome/main/welcome.component.ts","./apps/ide-ui/src/app/routes/welcome/main/welcome.component.html","./apps/ide-ui/src/app/routes/welcome/welcome.module.ts","./apps/ide-ui/src/app/shared/change/change.module.ts","./apps/ide-ui/src/app/shared/change/services/change-listen.service.ts","./apps/ide-ui/src/app/shared/change/services/change-update.service.ts","./apps/ide-ui/src/app/shared/pipes/locale-desc.pipe.ts","./apps/ide-ui/src/app/shared/pipes/locale.pipe.ts","./apps/ide-ui/src/app/shared/pipes/type-of.pipe.ts","./apps/ide-ui/src/app/shared/project/IdeProject.ts","./apps/ide-ui/src/app/shared/project/services/project.service.ts","./apps/ide-ui/src/app/shared/shared.module.ts","./apps/ide-ui/src/app/shared/text/services/locale.service.ts","./apps/ide-ui/src/app/shared/text/services/text.service.ts","./apps/ide-ui/src/app/shared/text/text.module.ts","./apps/ide-ui/src/environments/environment.next.ts","./apps/ide-ui/src/main.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { ChangeDetectorRef, Component, Inject, Injector } from '@angular/core';\nimport { Core } from '@dontcode/core';\nimport { CommonConfigService, DONT_CODE_CORE } from '@dontcode/plugin-common';\nimport { LightAppComponent } from '@dontcode/sandbox';\nimport {environment} from '../environments/environment';\n\n@Component({\n  selector: 'ide-ui-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent extends LightAppComponent{\n  title = 'ide-ui';\n\n  constructor (configService:CommonConfigService, httpClient: HttpClient, injector: Injector, ref: ChangeDetectorRef,\n    @Inject(DONT_CODE_CORE) dontCodeCore: Core\n) {\n    super (configService, httpClient, injector, ref, dontCodeCore);\n    this.defaultRepositoryUrl='assets/repositories/stable.json';\n      // Manages the different cases of loading the repository of plugins\n    this.runtimeConfig = (window as any).dontCodeConfig;\n    if ((this.runtimeConfig!=null) && (this.runtimeConfig?.repositoryUrl==null)) {\n      this.runtimeConfig.repositoryUrl=environment.repositoryUrl;\n    }\n\n  }\n  mainTab(): boolean {\n    return window.location.hash.indexOf('/newTabDev')==-1;\n  }\n\n}\n","<ide-ui-main *ngIf=\"mainTab()\"><ide-ui-main-editor></ide-ui-main-editor></ide-ui-main>\n<ng-container *ngIf=\"!mainTab()\"><router-outlet></router-outlet></ng-container>\n","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\n\nimport {AppComponent} from './app.component';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {LayoutModule} from './layout/layout.module';\nimport {EditorModule} from './routes/editor/editor.module';\nimport {RouterModule, Routes} from '@angular/router';\nimport {MainEditorComponent} from './routes/editor/main-editor/main-editor.component';\nimport {HttpClientModule} from '@angular/common/http';\nimport {ListChangesComponent} from './routes/dev/list-changes/list-changes.component';\nimport {DevModule} from './routes/dev/dev.module';\nimport {WelcomeModule} from './routes/welcome/welcome.module';\nimport {WelcomeComponent} from \"./routes/welcome/main/welcome.component\";\nimport {BasicModule} from \"@dontcode/plugin-basic\";\nimport {FieldsModule} from \"@dontcode/plugin-fields\";\nimport {ConfirmationService} from \"primeng/api\";\nimport { RestModule } from '@dontcode/plugin-rest';\nimport {PluginCommonModule} from \"@dontcode/plugin-common\";\nimport {ReportModule} from \"@dontcode/plugin-report\";\nimport {CommerceModule} from \"@dontcode/plugin-commerce\";\n\nconst appRoutes:Routes = [\n  { path: '', component: WelcomeComponent },\n  {path: 'editor', component: MainEditorComponent},\n  {path: 'welcome', component: WelcomeComponent},\n  {path: 'dev', component: ListChangesComponent},\n  {path: 'newTabDev', component: ListChangesComponent},\n  { path: 'project', loadChildren: () => import('./routes/project/project.module').then(m => m.ProjectModule) }]\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [BrowserModule, BrowserAnimationsModule\n    , EditorModule, LayoutModule, DevModule,\n    RouterModule.forRoot(\n      appRoutes,\n      { enableTracing: false,useHash:true } // <-- debugging purposes only\n    ),\n  HttpClientModule,\n  WelcomeModule,\n    PluginCommonModule.forRoot()\n    ,BasicModule\n    ,FieldsModule\n    ,RestModule\n    ,ReportModule\n    ,CommerceModule\n  ],\n  providers: [ConfirmationService],\n  bootstrap: [AppComponent]\n})\n\nexport class AppModule {}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MainComponent} from './main/main.component';\nimport {RouterModule} from '@angular/router';\nimport {MenuModule} from \"primeng/menu\";\nimport {ButtonModule} from \"primeng/button\";\nimport {ToolbarModule} from \"primeng/toolbar\";\nimport {SidebarModule} from \"primeng/sidebar\";\nimport {MenuComponent} from \"./menu/menu.component\";\nimport {TooltipModule} from \"primeng/tooltip\";\nimport {OverlayPanelModule} from \"primeng/overlaypanel\";\n\n\n@NgModule({\n  declarations: [MainComponent, MenuComponent],\n  exports: [\n    MainComponent\n  ],\n    imports: [\n        CommonModule, RouterModule, SidebarModule, ToolbarModule, ButtonModule, MenuModule, TooltipModule, OverlayPanelModule\n    ]\n})\nexport class LayoutModule { }\n","import {ChangeDetectorRef, Component, OnDestroy, OnInit} from '@angular/core';\nimport {combineLatest, Observable, Subscription} from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport {TextService} from '../../shared/text/services/text.service';\nimport {ChangeUpdateService} from \"../../shared/change/services/change-update.service\";\nimport {environment} from \"../../../environments/environment\";\nimport {Change, ChangeType, DontCodeModel, dtcde} from \"@dontcode/core\";\nimport {ProjectService} from \"../../shared/project/services/project.service\";\nimport { CommonConfigService } from '@dontcode/plugin-common';\n\n\n@Component({\n  selector: 'ide-ui-main',\n  templateUrl: './main.component.html',\n  styleUrls: ['./main.component.css']\n})\nexport class MainComponent implements OnInit, OnDestroy{\n\n  protected subscriptions = new Subscription();\n\n  context$: Observable<\n    {\n      status:string,\n      sessionId:string|undefined\n    }>|null = null;\n\n  sidePanelVisible: boolean = true;\n\n  serverUrl ='';\n\n  constructor( protected service:TextService\n              , protected updateService:ChangeUpdateService\n              , protected projectService: ProjectService\n              , protected configService:CommonConfigService\n              , protected ref: ChangeDetectorRef\n              ) {\n    this.subscriptions.add (configService.getUpdates ().subscribe( {\n      next: (newConfig) => {\n        const changed = newConfig.ideWebSocketUrl!=this.serverUrl;\n        if (changed) {\n          this.serverUrl=newConfig.ideWebSocketUrl??'';\n          this.ref.markForCheck();\n          this.ref.detectChanges();\n        }\n    }}));\n  }\n\n  protected sessionId:string|undefined;\n\n  ngOnInit(): void {\n    this.sidePanelVisible = true;\n\n    this.context$ = combineLatest([this.updateService.getConnectionStatus(), this.updateService.getSessionId()])\n      .pipe(map ((status) => {\n        this.sessionId=status[1];\n        return {status:status[0], sessionId:status[1]};\n      }));\n\n    this.loadSchema();\n    }\n\n  logoClicked() {\n    this.sidePanelVisible=true;\n  }\n\n  sidePanelVisibleChanged($event: any) {\n    //console.log($event);\n    this.sidePanelVisible=$event.target.visible;\n  }\n\n  loadSchema () {\n    this.service.resetSchema();\n    this.service.readSchema(dtcde.getSchemaManager().getSchema());\n//    this.service.readSchemaFormUrl('assets/core/'+DontCode.dtcde.getSchemaUri());\n    if (this.serverUrl.length!=0)\n      this.updateService.pushChange(new Change(ChangeType.RESET, DontCodeModel.ROOT,null));\n    this.projectService.newCurrentProject();\n\n    this.ref.detectChanges();\n  }\n\n  openDevUrl() {\n    window.open('#/newTabDev', '_blank');\n  }\n\n  openPreview() {\n    if( this.sessionId==null) {\n      window.open(environment.previewUrl, '_blank');\n    }else {\n      window.open(environment.previewUrl+'?sessionId='+this.sessionId, '_blank');\n    }\n  }\n\n  connectedClass(ctx: { status: string }): string {\n    if( ctx.status!==\"connected\") {\n      return \"p-button-danger\";\n    }\n    return '';\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n}","<div *ngIf=\"(context$ | async) as ctx\">\n  <p-toolbar id=\"mainToolbar\">\n    <div class=\"p-toolbar-group-left\">\n      <img src=\"./assets/images/logo.png\" width=\"119\" height=\"66\"/>\n      <button pButton type=\"button\" class=\"md:hidden p-button-rounded p-button-outlined\" icon=\"pi pi-bars\" (click)=\"sidePanelVisible=!sidePanelVisible\"></button>\n    </div>\n   <h1>Dont-code Builder</h1>\n    <div class=\"p-toolbar-group-right\">\n      <button pButton type=\"button\" class=\"p-button-rounded p-button-outlined\" icon=\"pi pi-cloud-download\" pTooltip=\"New Application\" (click)=\"loadSchema()\"></button>\n      <button pButton type=\"button\" class=\"p-button-rounded p-button-outlined\" icon=\"pi pi-book\" pTooltip=\"Open Debugging Window\" (click)=\"openDevUrl()\"></button>\n      <button pButton type=\"button\" class=\"p-button-rounded p-button-outlined\" [ngClass]=\"connectedClass(ctx)\" icon=\"pi pi-external-link\" pTooltip=\"Open Previewer\" (click)=\"openPreview()\"></button>\n      <button pButton type=\"button\" class=\"p-button-rounded p-button-outlined\" [ngClass]=\"connectedClass(ctx)\" icon=\"pi pi-sort\"  (mouseenter)=\"op.show($event)\"></button>\n      <p-overlayPanel #op [showCloseIcon]=\"false\" [style]=\"{width: '500px'}\">\n        <ng-template pTemplate>\n          <div class=\"grid\">\n            <div class=\"col-2\">Server:</div>\n            <div class=\"col-10\">{{serverUrl}}</div>\n            <div class=\"col-2\">Session:</div>\n            <div class=\"col-10\">{{ctx.sessionId}}</div>\n          </div>\n        </ng-template>\n      </p-overlayPanel>\n    </div>\n  </p-toolbar>\n  <div class=\"md:hidden\">\n    <p-sidebar id=\"mainSidePanel\" [style]=\"{width:'15em'}\" [(visible)]=\"sidePanelVisible\" [modal]=\"false\" [closeOnEscape]=\"true\" [showCloseIcon]=\"true\">\n      <img src=\"./assets/images/logo.png\" width=\"119\" height=\"66\"/>\n      <ide-ui-menu></ide-ui-menu>\n    </p-sidebar>\n  </div>\n  <div class=\"grid\">\n    <div class=\"col hidden md:block md:col-2\">\n      <ide-ui-menu id=\"mainMenu\"></ide-ui-menu>\n    </div>\n    <div class=\"col md:col-10\">\n      <router-outlet> </router-outlet>\n    </div>\n  </div>\n\n</div>\n","import {ChangeDetectionStrategy, Component} from \"@angular/core\";\nimport {MenuItem} from \"primeng/api\";\n\n@Component({\n  selector: 'ide-ui-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MenuComponent {\n\n  menuItems =new Array<MenuItem> (\n    {label:'Main Menu', items:[\n        {label:'Welcome', icon:'pi pi-home', routerLink:['/welcome']},\n        {label:'Projects', icon:'pi pi-home', routerLink:['/project']},\n        {label:'Editor', icon:'pi pi-pencil', routerLink:['/editor']},\n      ]},\n    {label:'Debug Menu', items:[\n        {label:'Dev', icon:'pi pi-book', routerLink: ['/dev']}\n      ]}\n  );\n\n}\n\n","<p-menu [model]=\"menuItems\"></p-menu>\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {ListChangesComponent} from './list-changes/list-changes.component';\nimport {TableModule} from \"primeng/table\";\n\n\n@NgModule({\n  declarations: [ListChangesComponent],\n    imports: [\n        CommonModule,\n        TableModule\n    ]\n})\nexport class DevModule { }\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { Change, ChangeType } from '@dontcode/core';\nimport { ChangeListenService } from '../../../shared/change/services/change-listen.service';\n\n@Component({\n  selector: 'ide-ui-list-changes',\n  templateUrl: './list-changes.component.html',\n  styleUrls: ['./list-changes.component.css'],\n  changeDetection:ChangeDetectionStrategy.OnPush\n})\nexport class ListChangesComponent implements OnInit {\n\n  // context$: Observable<any>;\n\n  @Input()\n  title: string='List of Changes';\n\n  listOfChanges:Change[]=new Array();\n\n  constructor(protected changeService:ChangeListenService,\n              private ref: ChangeDetectorRef) {\n  }\n\n  ngOnInit(): void {\n    this.listOfChanges=this.changeService.getListOfChanges();\n    this.changeService.getChangeEvents ().subscribe(value => {\n//      console.log(\"newVal\", value);\n      if (value.type===ChangeType.RESET) {\n        this.listOfChanges=this.changeService.getListOfChanges();\n      }\n        //We have to force refresh when displayed in another tab\n      this.ref.detectChanges();\n    });\n  }\n\n/*  newInit (): void {\n    this.listOfChanges=this.changeService.getListOfChanges();\n    this.context$ = combineLatest([this.changeService.getChangeEvents()])\n      .pipe(map ((change) => {\n        console.log(\"Updating...\");\n        this.ref.detectChanges();\n        return {change};\n      }));\n\n  }*/\n}\n","<h1>{{title}}</h1>\n\n<p-table [value]=\"listOfChanges\" [resizableColumns]=\"true\" styleClass=\"p-datatable-gridlines\">\n  <ng-template pTemplate=\"header\">\n    <tr>\n      <th pResizableColumn>Type</th>\n      <th pResizableColumn>Position</th>\n      <th pResizableColumn>Value</th>\n    </tr>\n  </ng-template>\n  <ng-template pTemplate=\"body\" let-change>\n    <tr>\n      <td>{{change.type}}</td>\n      <td>{{change.position}}</td>\n      <td>{{change.value | json}}</td>\n    </tr>\n  </ng-template>\n</p-table>\n","import {\n  AbstractSchemaItem,\n  DontCodeModelManager,\n  DontCodeSchemaEnum,\n  DontCodeSchemaItem,\n  DontCodeSchemaProperty,\n  DontCodeSchemaRef,\n  dtcde\n} from \"@dontcode/core\";\n\n\nexport class EditorElement {\n\n  id: string;\n  type: EditorElementType;\n  /**\n   * The position of this element in the hierarchy of elements\n   */\n  position: string;\n  /**\n   * The list of possible values (for a select box)\n   */\n  values: any[]|null=null;\n  /**\n   * The position of this element in the DontCode schema\n   */\n  schemaPosition: string;\n  /**\n   * The Schema model item represented by this element\n   */\n  schemaModel: DontCodeSchemaItem;\n\n  protected editedValue: any;\n\n  protected childrenToDisplay = new Array<EditorElement>();\n  protected allChildren = new Map<string, EditorElement> ();\n  protected forceRead = true;\n\n  protected parent: EditorElement|null=null;\n\n  /** An array of item carry the same schemamodel than the item itself, we use this to distinguish between the 2 modes\n   *\n   * @protected\n   */\n  protected asArray = false;\n\n  constructor(id:string, schemaItem:DontCodeSchemaItem, position:string, schemaPosition:string, type:EditorElementType) {\n    this.id = id;\n    this.schemaModel = schemaItem;\n    this.position=position;\n    this.schemaPosition=schemaPosition;\n\n    /**\n     * The id may not contains / as it is forbidden by html\n     */\n    if( this.id)\n      this.id=this.id.split('/').join('-');\n    this.type=type;\n  }\n\n  static createNew (position:string, schemaPosition:string, type:EditorElementType, schemaItem:DontCodeSchemaItem, listValues?:any[], initialValue?:any, asArray?:boolean) {\n    const ret = new EditorElement(position, schemaItem, position, schemaPosition, type);\n    if (listValues) {\n      ret.values=listValues;\n    }\n    if (initialValue) {\n        // Dont call setEditedValue as it would try to recalculate children\n      ret.editedValue=initialValue;\n    }\n\n    if( asArray) ret.asArray=asArray;\n    return ret;\n  }\n\n  getParent (): EditorElement|null {\n    return this.parent;\n  }\n\n  setParent (newParent:EditorElement ) {\n    this.parent = newParent;\n  }\n\n  isAsArray (): boolean {\n    return this.asArray;\n  }\n\n  isHidden (): boolean {\n    return DontCodeModelManager.isHidden (this.editedValue);\n  }\n\n  isReadonly (): boolean {\n    return DontCodeModelManager.isReadonly (this.editedValue);\n  }\n\n  /**\n   * Returns the item id of the DontCodeSchemaItem managed by this editor element if it's part of an array\n   */\n  getItemIdIfExists (): string|null {\n    if( (this.parent) && (this.parent.type===EditorElementType.array)) {\n      return this.position.substring(this.position.lastIndexOf('/') + 1);\n    }\n    return null;\n  }\n\n  getChildrenToDisplay (): Array<EditorElement> {\n    if (this.forceRead) {\n      this.childrenToDisplay.length=0;\n/*      let added=false;\n      if (this.type===EditorElementType.array) {\n        if (this.editedValue) {\n          for (const item in this.editedValue) {\n            if (this.editedValue.hasOwnProperty(item)) {\n              this.readSubSchema(this.position, this.schemaPosition, this.schemaModel, item, this.editedValue[item]);\n              added=true;\n            }\n          }\n        }\n      }\n      if(!added) {*/\n        this.readSubSchema(this.position, this.schemaPosition, this.schemaModel,undefined, this.editedValue );\n        if (this.schemaModel.isObject() || this.schemaModel.isArray())  // Object's value are stored in the children hierarchy, so we remove it from parent\n          this.editedValue=undefined;\n//      }\n      this.forceRead = false;\n    }\n    return this.childrenToDisplay;\n  }\n\n\n  /**\n   * Reads a DontCodeSchemaItem schema. Either is merges with current EditorElement\n   * @param position\n   * @param schemaPosition\n   * @param model\n   */\n  readSubSchema ( position:string, schemaPosition:string, model:DontCodeSchemaItem, mergeStartPosition?:number, values?:any): Array<EditorElement> {\n    const ret = this.childrenToDisplay;\n    let mergePosition = mergeStartPosition ? mergeStartPosition : 0;\n    const cache = this.allChildren;\n\n    const parent = model;\n    const children = new Array();\n    let initialValue = values;\n\n    if (this.asArray) {\n        // Makes sure subItems are created from the initialValues sent, if any\n        for (const itemKey in initialValue) {\n          if (initialValue.hasOwnProperty(itemKey)) {\n            children.push([itemKey, parent]);\n          }\n      }\n      if (children.length === 0) {// No initial items, so create a new empty one\n        children.push([this.getNextId(), parent]);\n      }\n    } else {\n      // Make sure all subproperties are considered\n        for (const childModel of parent.getChildren()) {\n          const propKey = childModel[0];\n          children.push([propKey, childModel[1]]);\n        }\n    }\n\n        // resolve schemareference of all children\n    children.forEach(value => {\n      if (value[1] instanceof DontCodeSchemaRef) {\n        if( !value[1].isArray() || parent === value[1]) // Only resolve ref if we are not creating the array element\n          value[1]=this.resolveRefs(value[1]);\n      }\n    });\n\n    for (const [propName, child] of children) {\n      let childPosition = position;\n      let schemaChildPosition = schemaPosition;\n      initialValue = values;\n        // Are we reading a subProperty ?\n      if (propName && propName.length>0) {\n        childPosition = childPosition + '/' + propName;\n        if( !this.asArray)\n          schemaChildPosition = schemaChildPosition + '/'+ propName;\n        if( initialValue)\n          initialValue = initialValue[propName];\n      }\n\n      let newElement:EditorElement|undefined = cache.get(propName);\n      if (!newElement) {\n        if (child.isArray() && (child!==parent) ) {\n          // A model can be an array and an object or value at the same time.\n          newElement = EditorElement.createNew(\n            childPosition, schemaChildPosition, EditorElementType.array, child, undefined, initialValue, true);\n        } else if (child.isValue()) {\n          newElement = EditorElement.createNew(\n            childPosition, schemaChildPosition, EditorElementType.input, child, undefined, initialValue);\n        } else if (child.isEnum()) {\n          const asEnum = child as DontCodeSchemaEnum;\n          newElement = EditorElement.createNew(\n            childPosition, schemaChildPosition, EditorElementType.list, child, asEnum.getValues(), initialValue);\n        } else if (child.isObject()) {\n          newElement = EditorElement.createNew(\n            childPosition, schemaChildPosition, EditorElementType.object, child, undefined, initialValue, false);\n        } /*else if (child.isReference()) {\n          this.readSubSchema(childPosition, schemaChildPosition, child, true, mergePosition, initialValue);\n        }*/ else {\n          console.error('Unknown item read from schema at position ' + position + ':', child);\n        }\n      } else if (initialValue!==undefined) {\n        newElement.setEditedValue(initialValue);\n      }\n\n      if (newElement) {\n        newElement.parent=this;\n        mergePosition = this.mergeElement(newElement, child, propName,mergePosition);\n        if (newElement.hasActiveProperties()) {\n          const toAddProps = newElement.getActiveProperties();\n          if (toAddProps) {\n              // We have to add a dynamic property, so let's create it with a possible value\n            let propValue = toAddProps.getRelativeId();\n            if ((values!=null)&&(propValue!=null)) {\n              propValue = values[propValue];\n            }else\n              propValue=undefined;\n            this.readSubSchema(position, schemaPosition, toAddProps, mergePosition, values);\n            // if the active properties are replacing the remaining elements, then remove the remaining elements and  just stop the loop here\n            if (newElement.isReplacementActive()) {\n              break;\n            }\n          }\n        }\n      }\n    }\n    return ret;\n  }\n\n  resolveRefs (entity: DontCodeSchemaItem): DontCodeSchemaItem {\n    let ret = entity;\n    if( entity.isReference()) {\n      const toFind = (entity as DontCodeSchemaRef).getReference();\n      const found= AbstractSchemaItem.goto(this.calculateRootSchema(),toFind);\n      if (found) ret=found;\n    }\n    return ret;\n  }\n\n  calculateRootSchema (): DontCodeSchemaItem {\n    let ret:DontCodeSchemaItem = this.schemaModel;\n    while (ret.getParent()) {\n      const parent =ret.getParent();\n      if (parent) ret = parent;\n    }\n    return ret;\n  }\n\n  getNextId() {\n    const childrenKeys = new Set<string>(this.allChildren.keys());\n    return DontCodeModelManager.generateNextKey(childrenKeys);\n  }\n\n  /**\n   * Creates a new sub element of an array. Usually called when the user clicks Add\n   * @param element\n   */\n  addSubElement() {\n    /**\n     * Creates the new element and adds it to the list\n     */\n    this.readSubSchema(this.position, this.schemaPosition, this.schemaModel);\n  }\n\n  removeElement( item:EditorElement, index?:number): EditorElement {\n    const parentList = this.getChildrenToDisplay();\n    if( !index){\n      index = parentList.indexOf(item);\n    }\n    const ret = parentList.splice(index,1)[0];\n    return ret;\n  }\n\n  /**\n   * Moves the item up one place and returns the immediate following item.\n   * or returns null if nothing have been moved\n   * @param item\n   * @param index\n   */\n  upElement( item: EditorElement, index: number): EditorElement|null {\n    const parentList = this.getChildrenToDisplay();\n    if( !index){\n      index = parentList.indexOf(item);\n    }\n\n    if (index>0) {\n      parentList.splice(index, 1);\n      parentList.splice(index-1,0,item);\n    } else {\n      return null;\n    }\n\n    return parentList[index];\n  }\n\n  /**\n   * Moves the item down and returns the next item if possible.\n   * Returns null if the item was already the last element (no move possible)\n   * or undefined if the moved item becomes the last element\n   * @param item\n   * @param index\n   */\n  downElement(item: EditorElement, index: number): EditorElement|null|undefined {\n    const parentList = this.getChildrenToDisplay();\n    if( !index){\n      index = parentList.indexOf(item);\n    }\n    if (index<parentList.length-1) {\n      parentList.splice(index, 1);\n      parentList.splice(index+1,0,item);\n    } else {\n      return null;\n    }\n\n    if ((index+1) === parentList.length-1) {\n      // Item becomes the last element, so no-one is after him\n      return undefined;\n    } else\n      return parentList[index+2];\n  }\n\n  getEditedValue (): any {\n    return this.editedValue;\n  }\n\n  setEditedValue (newVal:any): boolean {\n    const oldValue = this.editedValue;\n    this.editedValue = newVal;\n    const props = this.schemaModel.getProperties(this.editedValue);\n    if (props || (oldValue && (this.schemaModel.getProperties(oldValue)))) {\n      // The children properties have changed\n      //this.parent.mergeDisplayChildren(this, props);\n      if( this.parent)\n        this.parent.forceRead=true;\n      return true;\n    } else if ((this.schemaModel.isArray()) || (this.schemaModel.isObject())) {\n        // Remove all array items that are no more in values\n      for (const oldProp of this.allChildren.keys()) {\n        if( (!this.editedValue) || (this.editedValue[oldProp]===undefined)) {\n          this.allChildren.delete(oldProp);\n        }\n      }\n      this.forceRead=true;\n    }\n    return false;\n  }\n\n  protected hasActiveProperties(): boolean {\n    const props = this.schemaModel.getProperties(this.editedValue);\n    if (props)\n      return true;\n    else\n      return false;\n  }\n\n  protected getActiveProperties(): DontCodeSchemaProperty|undefined {\n    return this.schemaModel.getProperties(this.editedValue);\n  }\n\n  protected isReplacementActive(): boolean {\n    const props = this.schemaModel.getProperties(this.editedValue);\n    if (props && props.isReplace())\n      return true;\n    else\n      return false;\n  }\n\n  protected mergeElement(newElement: EditorElement, after:DontCodeSchemaItem, propName:string, mergeStartPosition: number): number {\n    const list= this.childrenToDisplay;\n    const cache = this.allChildren;\n    const key = propName??newElement.schemaModel.getRelativeId();\n    // If the element was already present, do nothing\n    if (cache.get(key)===newElement) {\n      // Returns its position\n      for (let i=0;i<list.length;i++) {\n        if (list[i]===newElement)\n          return i;\n      }\n    } else if (cache.get(key)!=null) {\n      console.error ('Setting 2 differents elements with the same property name: '+key+' for the element '+this.position);\n      throw new Error ('Setting 2 differents elements with the same property name: '+key+' for the element '+this.position);\n    }\n\n    cache.set(key, newElement);\n    if (mergeStartPosition>=list.length){\n      list.push(newElement);\n      return ++mergeStartPosition;\n    }\n\n    let foundAt=-1;\n    let alreadyThere=false;\n    for (let i=mergeStartPosition;i<list.length;i++) {\n      if (list[i].schemaModel===after) {\n        foundAt=i;\n      } else {\n        if (foundAt !== -1) {\n          // We found the insertion point, should we delete older elements or is the element already present in the list ?\n          if (list[i]===newElement) {\n            // It was already in the list !\n            alreadyThere = true;\n          }\n          break;\n        }\n      }\n    }\n\n    if (foundAt !== -1)\n      mergeStartPosition=foundAt+1;\n\n    if(!alreadyThere)\n      list.splice(mergeStartPosition, 0, newElement);\n    return mergeStartPosition;\n  }\n\n  getChild (propName:string) {\n    if (this.forceRead)\n      this.getChildrenToDisplay();\n    return this.allChildren.get(propName);\n  }\n\n  /**\n   * Retrieve the child in the hierarchy at the specified subposition.\n   * For example getChildInHierarchy ('sub/item/name') will return the name of the item who is child of sub child of the element\n   * getChildInHierarchy ('sub/table/ab/type') will return the type of the element ab of the array named table of sub child\n   * @param beforeAName\n   */\n  getChildInHierarchy(beforeAName: string): EditorElement|null {\n    const propNames=beforeAName.split('/');\n    let current:EditorElement|undefined = this;\n    //let nextIsArray= false;\n    //let arrayProp:string=null;\n    for (const propName of propNames) {\n      if( propName!==\"\") {\n        /*if( nextIsArray) {\n          current = this.getChildrenToDisplay().find(value => {\n            if (value.position.endsWith(arrayProp+'/'+propName))\n              return true;\n          });\n          arrayProp=null;\n          nextIsArray=false;\n        } else if( this.schemaModel.getChild(propName)?.isArray()) {\n          nextIsArray=true;\n          arrayProp = propName;\n        } else {*/\n        current = current.getChild(propName);\n   //     }\n        if(!current) {\n          return null;\n        }\n      }\n    }\n    return current;\n  }\n}\n\nexport enum EditorElementType {\n  array='array',\n  object='object',\n  newLine='newLine',\n  input='input',\n  list='list',\n  label='label'\n}\nenum ArrayAction {\n  DEFAULT,\n  NEW_ITEM=1,\n  ONLY_ITEM\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MainEditorComponent} from './main-editor/main-editor.component';\nimport {TextHandlerComponent} from './text-handler/text-handler.component';\nimport {TextElementComponent} from './text-element/text-element.component';\nimport {SelectElementComponent} from './select-element/select-element.component';\nimport {SharedModule} from '../../shared/shared.module';\nimport {InputElementComponent} from './input-element/input-element.component';\nimport {SubTextElementComponent} from './sub-text-element/sub-text-element.component';\nimport {AccordionModule} from \"primeng/accordion\";\nimport {ButtonModule} from \"primeng/button\";\nimport {DropdownModule} from \"primeng/dropdown\";\nimport {InputTextModule} from \"primeng/inputtext\";\nimport {FormsModule} from \"@angular/forms\";\nimport {AutoCompleteModule} from \"primeng/autocomplete\";\n\n\n@NgModule({\n  declarations: [MainEditorComponent, TextHandlerComponent, TextElementComponent, SelectElementComponent, InputElementComponent, SubTextElementComponent],\n  exports: [\n    MainEditorComponent\n  ],\n    imports: [\n        CommonModule,\n        SharedModule,\n        AccordionModule,\n        ButtonModule,\n        DropdownModule,\n        InputTextModule,\n        FormsModule,\n        AutoCompleteModule\n    ]\n})\nexport class EditorModule { }\n","import { Component, Input, OnInit } from '@angular/core';\nimport { EditorElement } from '../editor-element';\nimport { ChangeUpdateService } from '../../../shared/change/services/change-update.service';\nimport { Change, ChangeType } from '@dontcode/core';\n\n@Component({\n  selector: 'ide-ui-input-element',\n  templateUrl: './input-element.component.html',\n  styleUrls: ['./input-element.component.css']\n})\nexport class InputElementComponent implements OnInit {\n  @Input()\n  element!: EditorElement;\n\n  constructor(protected changeService:ChangeUpdateService) { }\n\n  ngOnInit(): void {\n  }\n\n  onChange(event: Event) {\n    const target = event.target as HTMLInputElement;\n\n    this.element.setEditedValue(target.value);\n    this.changeService.pushChange(\n      new Change(ChangeType.UPDATE,\n        this.element.position,\n        target.value));\n  }\n\n  editedValue() {\n    if (this.element.getEditedValue())\n      return this.element.getEditedValue();\n    else\n      return '';\n  }\n}\n","<span class=\"displayable\">{{(element.schemaPosition | locale)}}</span>\n<input pInputText [id]=\"element.id\" [name]=\"element.id\" (change)=\"onChange($event)\" [readonly]=\"element.isReadonly()\" [value]=\"editedValue()\">\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ChangeListenService } from \"../../../shared/change/services/change-listen.service\";\nimport { TextService } from \"../../../shared/text/services/text.service\";\nimport { EditorElement } from \"../editor-element\";\nimport {Subject, Subscription} from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { ChangeType, DontCodeModel } from \"@dontcode/core\";\n\n@Component({\n  selector: 'ide-ui-main-editor',\n  templateUrl: './main-editor.component.html',\n  styleUrls: ['./main-editor.component.css'],\n  changeDetection:ChangeDetectionStrategy.OnPush\n})\nexport class MainEditorComponent implements OnInit, OnDestroy {\n\n  rootElement:EditorElement|null=null;\n\n  unsubscriber = new Subscription();\n\n  constructor(protected ref:ChangeDetectorRef, protected changeListener: ChangeListenService, public textService:TextService) {\n    // Make sure the dev change listener is already started and listening\n\n  }\n\n  ngOnInit(): void {\n    this.unsubscriber.add(this.changeListener.getChangeEvents()\n      .subscribe(change => {\n        if (change.type===ChangeType.RESET) {\n          if( change.position===DontCodeModel.ROOT || change.position===\"\") {\n            this.rootElement = this.textService.getRootElement();\n            this.rootElement.setEditedValue(change.value?.creation);\n//            console.log('Reset received');\n            this.ref.markForCheck();\n            this.ref.detectChanges();\n          }\n        }\n      })\n    );\n    this.rootElement = this.textService.getRootElement();\n  }\n\n  ngOnDestroy(): void {\n    // unsubscribe to all observables\n    this.unsubscriber.unsubscribe();\n  }\n\n}\n","<ide-ui-text-handler *ngIf=\"rootElement\" [element]=\"rootElement\"></ide-ui-text-handler>\n","import {Component, EventEmitter, Input, OnInit, Output} from \"@angular/core\";\nimport {EditorElement} from '../editor-element';\nimport {ChangeUpdateService} from '../../../shared/change/services/change-update.service';\nimport {Change, ChangeType, DontCodeSchemaEnumValue} from '@dontcode/core';\n\n@Component({\n  selector: 'ide-ui-select-element',\n  templateUrl: './select-element.component.html',\n  styleUrls: ['./select-element.component.css']\n})\nexport class SelectElementComponent implements OnInit {\n\n  @Input()\n  element!: EditorElement;\n\n  @Output()\n  refresh = new EventEmitter<string>();\n\n  filteredElements:any[]=new Array();\n\n  constructor(protected changeService:ChangeUpdateService) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  calculateOptionValue(option: string): string {\n    return option;\n  }\n\n  editedValue() {\n    if (this.element.getEditedValue())\n      return this.element.getEditedValue();\n    else\n      return '';\n  }\n\n  onChange(change:any) {\n    //console.log('Selection change', change);\n    let value = change;\n    if( typeof change !== 'string') {\n      value = change.target.value;\n    }\n    const changed:boolean = this.element.setEditedValue(value);\n\n    this.changeService.pushChange(\n      new Change(ChangeType.UPDATE,\n        this.element.position,\n        value));\n\n    if(changed) {\n      this.refresh.emit('refresh');\n    }\n  }\n\n  filterGroupedElements(event:any) {\n    const filteredGroups = [];\n    const defaultGroup:{label:string, items:Array<any>|null} = {\n      label: 'Standard',\n      items: null\n    }\n\n      // If there is only one selection left, then selects it\n    let selectItem:DontCodeSchemaEnumValue|null = null;\n    let selectedCount = 0;\n\n    event.query = event.query?.toLowerCase();\n\n    for (const optgroup of this.element.values as Array<DontCodeSchemaEnumValue>) {\n      if( !(optgroup.getChildren()) || (optgroup.getChildren().length===0)) {\n        if( optgroup.getLabel().toLowerCase().indexOf(event.query) >= 0) {\n          if (defaultGroup.items === null) {\n            defaultGroup.items = new Array();\n            filteredGroups.push(defaultGroup);\n          }\n          defaultGroup.items.push (optgroup.getLabel());\n          if((event.query?.length === optgroup.getLabel().length)) {\n            selectedCount++;\n            selectItem = optgroup;\n            }\n        }\n      } else {\n        const items = optgroup.getChildren().filter (value => value.getLabel().toLowerCase().indexOf(event.query) >=0);\n        if( items.length>0) {\n          selectedCount += items.length;\n          selectItem = items[0];\n          filteredGroups.push({\n            label: optgroup.getLabel(),\n            value: optgroup.getValue(),\n            items: items.map(value => value.getLabel())\n          });\n        }\n      }\n    }\n\n    this.filteredElements = filteredGroups;\n    if ((selectedCount===1)&&(selectItem)) {\n      if (selectItem.getLabel().length===event.query?.length) {\n        this.onChange({target: {value:selectItem.getLabel()}});\n      }\n    }\n  }\n}\n","<span class=\"displayable\">{{(element.schemaPosition | locale)}}</span>\n<p-autoComplete class=\"displayable\" [ngModel]=\"editedValue()\" [group]=\"true\" [id]=\"element.id\" [suggestions]=\"filteredElements\" (completeMethod)=\"filterGroupedElements($event)\"\n                (onSelect)=\"onChange($event)\" [dropdown]=\"true\" [readonly]=\"element.isReadonly()\">\n  <ng-template let-group pTemplate=\"group\">\n    <div class=\"p-d-flex p-ai-center\">\n      <span>{{group.label}}</span>\n    </div>\n  </ng-template>\n  <ng-template let-option pTemplate=\"item\">\n    {{(option | locale)}}\n  </ng-template>\n</p-autoComplete>\n<!-- p-dropdown class=\"displayable\" [id]=\"element.id\" [options]=\"element.values\" (onChange)=\"onChange($event)\" [ngModel]=\"element?.getEditedValue()\">\n  <ng-template let-option pTemplate=\"item\">\n    {{(option | locale)}}\n  </ng-template>\n</p-dropdown -->\n\n","import { Component, Input, OnChanges, OnInit, SimpleChanges } from \"@angular/core\";\nimport { EditorElement } from \"../editor-element\";\nimport { ChangeUpdateService } from \"../../../shared/change/services/change-update.service\";\nimport { Change, ChangeType } from \"@dontcode/core\";\n\n@Component({\n  selector: 'ide-ui-sub-text-element',\n  templateUrl: './sub-text-element.component.html',\n  styleUrls: ['./sub-text-element.component.css']\n})\nexport class SubTextElementComponent implements OnInit, OnChanges {\n  @Input()\n  element!: EditorElement;\n\n  items: EditorElement[]=new Array();\n  constructor(protected changeService:ChangeUpdateService) { }\n\n  ngOnInit(): void {\n  }\n\n  addElement() {\n    this.element.addSubElement();\n  }\n\n  removeElement(item:EditorElement, index:number) {\n    const removed = this.element.removeElement( item, index);\n    this.changeService.pushChange(\n      new Change(ChangeType.DELETE,\n        removed.position, null));\n  }\n\n  /**\n   * Moves the item up one place and returns the immediately following item, if there is one.\n   * or returns null if nothing have been moved\n   * @param item\n   * @param index\n   */\n  upElement(item:EditorElement, index:number) {\n    const oldPos = item.position; // The old position is the same as the new one in this case (only the beforeId changes)\n    const nextElement = this.element.upElement( item, index);\n    if( nextElement !== null) {\n      const nextKey= nextElement.getItemIdIfExists();\n\n      this.changeService.pushChange(\n        new Change(ChangeType.MOVE, item.position, item.getEditedValue(),undefined, nextKey?nextKey as string:undefined, oldPos)\n      );\n    }\n  }\n  downElement(item:EditorElement, index:number) {\n    const oldPos = item.position; // The old position is the same as the new one in this case (only the beforeId changes)\n    const nextElement = this.element.downElement( item, index);\n    if( nextElement!==null) {\n      let nextKey;\n      if( nextElement===undefined) {  // It is the last element\n        nextKey = undefined;\n      } else {\n        nextKey=nextElement.getItemIdIfExists();\n      }\n      this.changeService.pushChange(\n          new Change(ChangeType.MOVE, item.position, item.getEditedValue(),undefined, nextKey?nextKey as string:undefined, oldPos)\n        );\n\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.items = this.element.getChildrenToDisplay();\n  }\n}\n","<span class=\"displayable\" >{{(element.schemaPosition | locale)}}</span>\n<p-accordion>\n  <p-accordionTab [selected]=\"true\">\n    <ng-template pTemplate=\"header\"><span class=\"displayable\" [id]=\"element.id\">{{(element.schemaPosition | localeDesc)}}</span></ng-template>\n    <ng-template pTemplate=\"content\">  <div style=\"padding-left: 10px\">\n      <ng-container *ngFor=\"let item of items; index as i\">\n        <ng-container *ngIf=\"!item.isHidden()\">\n          <ide-ui-text-handler [element]=\"item\"></ide-ui-text-handler>\n          <ng-container>\n            <button pButton type=\"button\" class=\"p-button-secondary p-button-rounded p-button-outlined\" [id]=\"item.id+'-add-button'\" icon=\"pi pi-plus\" aria-label=\"Add item\" (click)=\"addElement()\">\n            </button>\n            <button pButton type=\"button\" class=\"p-button-danger p-button-rounded p-button-outlined\" [id]=\"item.id+'-remove-button'\" icon=\"pi pi-minus\" aria-label=\"Remove item\" (click)=\"removeElement(item, i)\">\n            </button>\n            <button *ngIf=\"i>0\" pButton type=\"button\" class=\"p-button-secondary p-button-rounded p-button-outlined\" [id]=\"item.id+'-up-button'\" icon=\"pi pi-caret-up\" aria-label=\"Up\" (click)=\"upElement(item, i)\">\n            </button>\n            <button *ngIf=\"i<items.length-1\" pButton type=\"button\" [id]=\"item.id+'-down-button'\" class=\"p-button-secondary p-button-rounded p-button-outlined\"  icon=\"pi pi-caret-down\" aria-label=\"Down\" (click)=\"downElement(item, i)\">\n            </button>\n            <br />\n          </ng-container>\n        </ng-container>\n      </ng-container>\n      <ng-container *ngIf=\"items.length==0\">\n        <button pButton type=\"button\" class=\"p-button-secondary p-button-rounded p-button-outlined\" [id]=\"element.id+'-new-button'\" icon=\"pi pi-plus\" aria-label=\"Add item\" (click)=\"addElement()\">\n        </button>\n      </ng-container>\n    </div>\n    </ng-template>\n  </p-accordionTab>\n</p-accordion>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { EditorElement } from '../editor-element';\n\n@Component({\n  selector: 'ide-ui-text-element',\n  templateUrl: './text-element.component.html',\n  styleUrls: ['./text-element.component.css']\n})\nexport class TextElementComponent implements OnInit {\n  @Input()\n  element!: EditorElement;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<span class=\"displayable\" [id]=\"element.id\">{{(element.schemaPosition | locale)}}</span>\n","import { ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from \"@angular/core\";\nimport { TextService } from '../../../shared/text/services/text.service';\nimport { EditorElement } from '../editor-element';\n\n@Component({\n  selector: 'ide-ui-text-handler',\n  templateUrl: './text-handler.component.html',\n  styleUrls: ['./text-handler.component.css']\n})\nexport class TextHandlerComponent implements OnInit, OnChanges {\n\n  @Input()\n  element!:EditorElement;\n\n  listOfElements:EditorElement[] = [];\n\n  constructor(protected model: TextService, protected ref:ChangeDetectorRef) { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n//    console.log(\"text Changed\");\n    this.listOfElements = this.element.getChildrenToDisplay();\n  }\n\n  refresh() {\n    this.listOfElements = this.element.getChildrenToDisplay();\n    this.ref.detectChanges();\n  }\n}\n","<ng-container>\n  <ng-container *ngFor=\"let element of listOfElements\">\n    <ng-container *ngIf=\"!element.isHidden()\">\n      <ng-container [ngSwitch]=\"element.type\">\n        <br *ngSwitchCase=\"'newLine'\"/>\n        <ide-ui-text-element *ngSwitchCase=\"'string'\" [element]=\"element\"></ide-ui-text-element>\n        <ng-container *ngSwitchCase=\"'object'\">\n          <div><span class=\"displayable\" >{{(element.schemaPosition | locale)}}</span>\n            <ide-ui-text-handler  [element]=\"element\">\n            </ide-ui-text-handler>\n          </div>\n          <br />\n        </ng-container>\n        <ide-ui-sub-text-element *ngSwitchCase=\"'array'\" [element]=\"element\">\n        </ide-ui-sub-text-element>\n        <ide-ui-select-element *ngSwitchCase=\"'list'\" [element]=\"element\" (refresh)=\"refresh()\"></ide-ui-select-element>\n        <ide-ui-input-element *ngSwitchCase=\"'input'\" [element]=\"element\"></ide-ui-input-element>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</ng-container>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'ide-ui-welcome',\n  templateUrl: './welcome.component.html',\n  styleUrls: ['./welcome.component.css']\n})\nexport class WelcomeComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<h2>Welcome to Dont-code !</h2>\n<p>You are running the Builder application of the Dont-code platform.</p>\n<p>Use this tool to create new applications or load and edit their behaviors.</p>\n<div class=\"grid align-items-stretch\">\n<div class=\"welcome-question col-12\">\n  <h2>Tutorials</h2>\n</div>\n<div class=\"col-12 md:col-6\">\n  <p-card header=\"Show me a demo\" subheader=\"The fastest way to see the Dont-code platform in action is to load an existing project.\">\n    <div class=\"welcome-item\"><p-badge value=\"1\"></p-badge> Open the Previewer by clicking on <button pButton type=\"button\" class=\"p-button-rounded p-button-outlined\" icon=\"pi pi-external-link\"></button> on the top bar.</div>\n    <div class=\"welcome-item\"><p-badge value=\"2\"></p-badge> Then select the menu <i class=\"pi pi-home\" style=\"font-size: 1.1rem\">&nbsp;Projects</i> on the side bar.</div>\n    <div class=\"welcome-item\"><p-badge value=\"3\"></p-badge> Load the Task Manager project <p-button icon=\"pi pi-play\" label=\"Play\"></p-button></div>\n    <div class=\"welcome-item\"><p-badge value=\"4\"></p-badge> Edit some elements in the <i class=\"pi pi-pencil\" style=\"font-size: 1.1rem\">&nbsp;Editor</i></div>\n    <div class=\"welcome-item\"><p-badge value=\"5\"></p-badge> And watch the Previewer acting accordingly <img src=\"assets/images/preview-ui-tab.png\" /></div>\n  </p-card>\n</div>\n<div class=\"col-12 md:col-6\">\n  <p-card header=\"Start from scratch\" subheader=\"Gets more insights by working from a blank project\">\n    <div class=\"welcome-item\"><p-badge value=\"1\"></p-badge> Open the Previewer by clicking on <button pButton type=\"button\" class=\"p-button-rounded p-button-outlined\" icon=\"pi pi-external-link\"></button> on the top bar.</div>\n    <div class=\"welcome-item\"><p-badge value=\"2\"></p-badge> Then Create a new application by clicking on <i class=\"pi pi-download\" style=\"font-size: 1.1rem\">&nbsp;New Application</i> icon.</div>\n    <div class=\"welcome-item\"><p-badge value=\"3\"></p-badge> Edit some elements in the <i class=\"pi pi-pencil\" style=\"font-size: 1.1rem\">&nbsp;Editor</i></div>\n    <div class=\"welcome-item\"><p-badge value=\"4\"></p-badge> And watch the Previewer acting accordingly <img src=\"assets/images/preview-ui-tab.png\" /></div>\n    <div class=\"welcome-item\"><p-badge value=\"5\"></p-badge> You can save your work by selecting <i class=\"pi pi-home\" style=\"font-size: 1.1rem\">&nbsp;Projects</i> on the side bar.</div>\n    <div class=\"welcome-item\"><p-badge value=\"6\"></p-badge> And select <p-button icon=\"pi pi-save\" label=\"Save\"></p-button> button.</div>\n  </p-card>\n</div>\n\n</div>\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {WelcomeComponent} from './main/welcome.component';\nimport {ButtonModule} from \"primeng/button\";\nimport {CardModule} from \"primeng/card\";\nimport {BadgeModule} from \"primeng/badge\";\n\n\n@NgModule({\n  declarations: [WelcomeComponent],\n    imports: [\n        CommonModule, ButtonModule, CardModule, BadgeModule\n    ]\n})\nexport class WelcomeModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule\n  ]\n})\nexport class ChangeModule { }\n","import { Injectable } from '@angular/core';\nimport { ChangeUpdateService } from './change-update.service';\nimport { BroadcastChannel } from 'broadcast-channel';\nimport {Change, ChangeType, DontCodeChangeManager, dtcde} from '@dontcode/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport {DontCodeModelManager} from \"@dontcode/core\";\n\n/**\n * List to all the changes on the edited elements from the BroadCastChannel and updates\n * a list of changes from it.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChangeListenService {\n\n  protected channel: BroadcastChannel<Change>;\n  protected listOfChanges: Change[]=[];\n\n  protected changeEmitter = new ReplaySubject<Change> ();\n\n  constructor(protected changeMgr:DontCodeChangeManager) {\n    this.channel = new BroadcastChannel(ChangeUpdateService.CHANNEL_CHANGE_NAME);\n    console.log('Channel receiver created');\n    this.channel.onmessage = msg => {\n      if( msg.type===ChangeType.RESET) {\n        this.listOfChanges.length=0;\n      } else {\n        this.listOfChanges.push(msg);\n      }\n      this.changeEmitter.next(msg);\n      if (msg.type===ChangeType.RESET)\n        this.resetEmitter ();\n    };\n    this.changeEmitter.subscribe({\n      next: change => {\n        this.changeMgr.pushChange(change);\n      }\n    })\n\n\n  }\n\n  resetEmitter () {\n    const newReplay = new ReplaySubject<Change>();\n    newReplay.observers=this.changeEmitter.observers;\n    this.changeEmitter=newReplay;\n  }\n\n  getListOfChanges (): Change[] {\n    return this.listOfChanges;\n  }\n\n  getChangeEvents (): Observable<Change> {\n    return this.changeEmitter;\n  }\n\n}\n","import {Injectable} from \"@angular/core\";\nimport {Change, ChangeType, DontCodeModel, Message, MessageType} from \"@dontcode/core\";\nimport {BroadcastChannel} from \"broadcast-channel\";\nimport {webSocket, WebSocketSubject, WebSocketSubjectConfig} from \"rxjs/webSocket\";\n\nimport {Observable, ReplaySubject} from \"rxjs\";\nimport { CommonConfigService } from \"@dontcode/plugin-common\";\n\n/**\n * Updates all changes to the edited elements (what the user entered in the IDE)\n * to a broadcastchannel (for dev tab) and the websocket to the services.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChangeUpdateService {\n\n  public static readonly CHANNEL_CHANGE_NAME='ide-ui-changes';\n  protected listOfChanges: Change[]=[];\n  protected channel: BroadcastChannel<Change>;\n\n  protected ideServicesWebSocket: WebSocketSubject<Message>|null=null;\n  protected connectionStatus: ReplaySubject<string>=new ReplaySubject<string>(1);\n\n  /**\n   * The Id of the session as returned by the services. This is used to tell the previewer to listen only to this session\n   * @protected\n   */\n  protected sessionIdSubject = new ReplaySubject<string|undefined>(1);\n  protected sessionId?:string;\n\n  protected currentSocketUrl: string|null =null;\n\n  constructor(protected configService:CommonConfigService) {\n    console.debug('Creating channel');\n    this.channel = new BroadcastChannel(ChangeUpdateService.CHANNEL_CHANGE_NAME);\n\n    this.configService.getUpdates().subscribe((newConfig) => {\n      const socketChanged = newConfig.ideWebSocketUrl!=this.currentSocketUrl;\n      if (socketChanged) {\n        this.currentSocketUrl=newConfig.ideWebSocketUrl??null;\n          // Close the current socket, it will be opened when needed\n        if (this.ideServicesWebSocket) {\n          if (!this.ideServicesWebSocket.closed) {\n            this.ideServicesWebSocket?.complete();\n          }\n        }\n        if( this.currentSocketUrl!=null)\n        this.pushChange(new Change(ChangeType.RESET, DontCodeModel.ROOT,null));\n\n      }\n    });\n\n    this.connectionStatus.next(\"closed\");\n    this.sessionIdSubject.next(undefined);\n\n  }\n\n  protected openWebSocket (): Promise<WebSocketSubject<Message>> {\n      // Check if there is one already opened\n    if (this.ideServicesWebSocket) {\n      if (!this.ideServicesWebSocket.closed) {\n        return Promise.resolve(this.ideServicesWebSocket);\n      }\n    }\n      // If not, then check if we can open one\n    const socketUrl=this.currentSocketUrl;\n    if (socketUrl==null) {\n      return Promise.reject(\"No Websocket Url to connect to\")\n    } else {\n      const ret = new Promise<WebSocketSubject<Message>>((resolve, reject) => {\n        const config: WebSocketSubjectConfig<any> = {\n          url: socketUrl,\n          closeObserver: {\n            next: value => {\n              console.debug(\"Close\", value);\n\n            }\n          },\n          openObserver: {\n            next: value => {\n              if (this.ideServicesWebSocket)\n                resolve(this.ideServicesWebSocket);\n              else\n                reject('No WebSocket');\n            },\n            error: err => {\n              console.error(\"error connecting socket\", err);\n              reject(err);\n            }\n          }\n        }\n\n        this.ideServicesWebSocket = webSocket(config);\n        this.connectionStatus.next(\"connected\");\n        this.sessionIdSubject.next(undefined);\n        this.ideServicesWebSocket.asObservable().subscribe({\n          next: msg => {\n\n            //console.log('message received: ' , msg);\n            const newId=msg?.sessionId;\n            if ((newId) && (newId !== this.sessionId)){\n              console.debug('Received SessionId ', newId);\n              this.sessionId=newId;\n              this.sessionIdSubject.next(newId);\n            }\n          },\n          // Called whenever there is a message from the server\n          error: err => {\n            console.error(err);\n            this.ideServicesWebSocket?.unsubscribe();\n            this.ideServicesWebSocket = null;\n            this.connectionStatus.next(\"ERROR:\" + err);\n            this.sessionIdSubject.next(undefined);\n          },\n          // Called if WebSocket API signals some kind of error\n          complete: () => {\n            console.debug('complete');\n            this.ideServicesWebSocket?.unsubscribe();\n            this.ideServicesWebSocket = null;\n            this.connectionStatus.next(\"closed\");\n            this.sessionIdSubject.next(undefined);\n          }\n          // Called when connection is closed (for whatever reason)\n        });\n      });\n      return ret;\n    }\n  }\n\n  pushChange (newChange:Change): void {\n    //console.log('Change pushed');\n    if( newChange.type===ChangeType.RESET) {\n      this.listOfChanges.length=0;\n    } else {\n      this.listOfChanges.push(newChange);\n    }\n    this.channel.postMessage(newChange);\n    this.updateSocket(new Message (MessageType.CHANGE, this.sessionId, newChange));\n  }\n\n  async updateSocket (newChange:Message) {\n    this.openWebSocket().then (socket => socket.next(newChange));\n  }\n\n  getListOfChanges (): Change[] {\n    return this.listOfChanges;\n  }\n\n  getConnectionStatus (): Observable<string> {\n    return this.connectionStatus;\n  }\n  getSessionId (): Observable<string|undefined> {\n    return this.sessionIdSubject;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { LocaleService } from '../text/services/locale.service';\n\n@Pipe({\n  name: 'localeDesc'\n})\nexport class LocaleDescPipe implements PipeTransform {\n\n  constructor(protected locale:LocaleService) {\n  }\n\n  transform(value: string, ...args: unknown[]): unknown {\n    return this.locale.toText(value+'-desc');\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { LocaleService } from '../text/services/locale.service';\n\n@Pipe({\n  name: 'locale'\n})\nexport class LocalePipe implements PipeTransform {\n\n  constructor(protected locale:LocaleService) {\n  }\n\n  transform(value: string, ...args: unknown[]): unknown {\n    return this.locale.toText(value);\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'typeOf'\n})\nexport class TypeOfPipe implements PipeTransform {\n\n  transform(value: unknown, ...args: unknown[]): unknown {\n    if (Array.isArray(value))\n      return 'array';\n    else\n      return typeof value;\n  }\n\n}\n","import { DontCodeProject } from '@dontcode/core';\n\nexport class IdeProject extends DontCodeProject {\n  _id:any;\n  current?: boolean;\n  content: any;\n}\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {firstValueFrom, Observable, of, Subscription, throwError} from \"rxjs\";\nimport {IdeProject} from \"../IdeProject\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {map} from \"rxjs/operators\";\nimport {Change, ChangeType, dtcde} from \"@dontcode/core\";\nimport {ChangeUpdateService} from \"../../change/services/change-update.service\";\nimport { CommonConfigService } from '@dontcode/plugin-common';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProjectService implements OnDestroy{\n\n  protected subscriptions = new Subscription();\n  projects: Array<IdeProject> = [];\n\n  protected currentProject: IdeProject;\n  projectApiUrl: string|null = null;\n\n  constructor(protected http: HttpClient, protected configService: CommonConfigService) {\n    this.currentProject=new IdeProject();\n    this.currentProject.template=false;\n    this.currentProject.current = true;\n      // Receive any updates of the project urls\n    this.subscriptions.add(this.configService.getUpdates().subscribe ( {\n      next: (newConfig) => {\n        this.projectApiUrl = newConfig.projectApiUrl??null;\n      }\n    }));\n  }\n\n  loadListOfProjects () :Observable<Array<IdeProject>> {\n    if (this.projectApiUrl!=null) {\n      return this.http.get<Array<IdeProject>>(this.projectApiUrl).pipe(\n        map(newProjects => {\n          this.projects=this.placeCurrentProject(newProjects);\n          return this.projects;\n        }));\n    } else {\n      return throwError ( () => new Error (\"No API provided to load projects\"));\n    }\n  }\n\n  placeCurrentProject (projects:Array<IdeProject>) {\n    // Keep the currentProject at first place in the list\n    const found = projects.findIndex(value => {\n      return value._id === this.currentProject._id;\n    });\n    if( found === -1) {\n      projects=[this.currentProject, ...projects];\n    } else {\n      projects.splice(found, 1);\n      projects=[this.currentProject, ...projects];\n    }\n    return projects;\n\n  }\n\n  saveCurrentProject (): Promise<IdeProject> {\n    if (this.projectApiUrl!=null) {\n\n      const toSave = {...this.currentProject};\n      delete toSave.current;  // We don't want to save the fact it's the current project\n\n      const model = dtcde.getModelManager().getContent();\n      toSave.content = model;\n      if( toSave._id) {\n        return firstValueFrom(this.http.put<IdeProject>(this.projectApiUrl+'/'+this.currentProject.name, toSave, {responseType:\"json\"} ).pipe(\n          map (value => {\n          delete value.content;\n          return value;\n        }))\n        );\n      } else {\n        return firstValueFrom(this.http.post<IdeProject>(this.projectApiUrl, toSave, {responseType:\"json\"} ).pipe (\n          map (value => {\n            this.currentProject._id=value._id;\n            return this.currentProject;\n          }))\n        );\n      }\n    } else {\n      return Promise.reject ( new Error (\"No API provided to save project.\"));\n    }\n\n  }\n\n  loadProject (prj:IdeProject): Promise<IdeProject> {\n    if( prj.name) {\n      if (this.projectApiUrl!=null) {\n        return firstValueFrom(this.http.get<IdeProject>(this.projectApiUrl + '/' + prj.name, {responseType: 'json'}));\n      } else {\n        return Promise.reject ( new Error (\"No API provided to load project.\"));\n      }\n  \n    } else {\n      return Promise.resolve(prj);\n    }\n  }\n\n  /**\n   * Creates a new empty project and sets it as current project\n   */\n  newCurrentProject (): IdeProject {\n    this.setCurrentProject(new IdeProject());\n    return this.currentProject;\n  }\n\n  setCurrentProject (prj:IdeProject): void {\n    if( this.currentProject?.current) {\n      delete this.currentProject.current;\n    }\n    this.currentProject=prj;\n    this.currentProject.current = true;\n    this.projects = this.placeCurrentProject(this.projects);\n  }\n\n  loadAndSetCurrentProject (prj:IdeProject, updateService: ChangeUpdateService) : Promise<IdeProject>{\n   // console.log(\"Loading Project\");\n    return this.loadProject(prj).then (value => {\n     // console.log(\"Setting current Project\");\n      this.setCurrentProject(value);\n      // console.log(\"Pushing update\");\n      updateService.pushChange(new Change(ChangeType.RESET, '', value.content));\n      // console.log(\"Loading Project done\");\n      return value;\n    })\n\n  }\n\n  getCurrentProject (): IdeProject {\n    return this.currentProject;\n  }\n\n  isCurrentProject (prj:IdeProject): boolean {\n    if (prj.current)  return prj.current;\n    else\n      return false;\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TypeOfPipe } from './pipes/type-of.pipe';\nimport { TextModule } from './text/text.module';\nimport { LocalePipe } from './pipes/locale.pipe';\nimport { LocaleDescPipe } from './pipes/locale-desc.pipe';\nimport { ChangeModule } from './change/change.module';\n\n@NgModule({\n    declarations: [TypeOfPipe, LocalePipe, LocaleDescPipe],\n  exports: [\n    TypeOfPipe,\n    LocalePipe,\n    LocaleDescPipe\n  ],\n    imports: [\n        CommonModule,\n        TextModule,\n      ChangeModule\n    ]\n})\nexport class SharedModule { }\n","import { Injectable } from '@angular/core';\nimport { DontCodeModel } from '@dontcode/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LocaleService {\n  texts = new Map<string, string> ([\n    [DontCodeModel.ROOT, 'I want to create'],\n    [DontCodeModel.APP_TYPE, 'I want to create a'],\n    [DontCodeModel.APP_NAME, 'with the name'],\n    [DontCodeModel.APP_NAME+'-desc', 'Enter the name'],\n    [DontCodeModel.APP_ENTITIES, 'handing the following items:'],\n    [DontCodeModel.APP_ENTITIES+'-desc', 'List of managed items'],\n    [DontCodeModel.APP_ENTITIES_FROM, 'An item from'],\n    [DontCodeModel.APP_ENTITIES_FROM+'-desc', 'Predefined items'],\n    [DontCodeModel.APP_ENTITIES_NAME, 'with the name'],\n    [DontCodeModel.APP_ENTITIES_NAME+'-desc', 'Name of item'],\n    [DontCodeModel.APP_FIELDS, 'containing the following fields:'],\n    [DontCodeModel.APP_FIELDS+'-desc', 'List of fields'],\n    [DontCodeModel.APP_FIELDS_NAME, 'A field named'],\n    [DontCodeModel.APP_FIELDS_NAME+'-desc', 'Name of field'],\n    [DontCodeModel.APP_FIELDS_TYPE, 'with the type'],\n    [DontCodeModel.APP_FIELDS_TYPE+'-desc', 'Type of field'],\n    [DontCodeModel.APP_REPORTS, 'It will display reports:'],\n    [DontCodeModel.APP_REPORTS+'-desc', 'Design the reports you want to use'],\n    [DontCodeModel.APP_REPORTS_TITLE, 'One named'],\n    [DontCodeModel.APP_REPORTS_TITLE+'-desc', 'The title of the report'],\n    [DontCodeModel.APP_REPORTS_FOR, 'for the item'],\n    [DontCodeModel.APP_REPORTS_FOR+'-desc', 'Name of the item to generate the report for'],\n    [DontCodeModel.APP_REPORTS_GROUP, 'Values must be grouped'],\n    [DontCodeModel.APP_REPORTS_GROUP+'-desc', 'Select if and how a grouping of values will be done'],\n    [DontCodeModel.APP_REPORTS_GROUP_OF, 'on'],\n    [DontCodeModel.APP_REPORTS_GROUP_OF+'-desc', 'The field or the type of field to use for grouping'],\n    [DontCodeModel.APP_REPORTS_GROUP_SHOW, 'show'],\n    [DontCodeModel.APP_REPORTS_GROUP_SHOW+'-desc', 'if grouping on a type of field, which one to show ?'],\n    [DontCodeModel.APP_REPORTS_GROUP_LABEL, 'with the label'],\n    [DontCodeModel.APP_REPORTS_GROUP_LABEL+'-desc', 'The title of the group to display'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE, 'and the group must display'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE+'-desc', 'What result to be displayed for each group ?'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE_OPERATION, 'the'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE_OPERATION+'-desc', 'Operation to display on the elements'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE_OF, 'of'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE_OF+'-desc', 'What field will be displayed ?'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE_LABEL, 'labelled as'],\n    [DontCodeModel.APP_REPORTS_GROUP_AGGREGATE_LABEL+'-desc', 'The label of the field aggregation'],\n    [DontCodeModel.APP_REPORTS_SORT, 'Please sort the values'],\n    [DontCodeModel.APP_REPORTS_SORT+'-desc', 'Specify how the values will be sorted'],\n    [DontCodeModel.APP_REPORTS_SORT_BY, 'according to'],\n    [DontCodeModel.APP_REPORTS_SORT_BY+'-desc', 'The field you want to sort'],\n    [DontCodeModel.APP_REPORTS_SORT_DIRECTION, 'order'],\n    [DontCodeModel.APP_REPORTS_SORT_DIRECTION+'-desc', 'Highest ranking or Lowest ranking first ?'],\n    [DontCodeModel.APP_REPORTS_DISPLAY, 'The report displays'],\n    [DontCodeModel.APP_REPORTS_DISPLAY+'-desc', 'what must be displayed'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_TYPE, 'a'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_TYPE+'-desc', 'the graph or table you want displayed'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_OF, 'of'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_OF+'-desc', 'the field to display. Empty for all'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_BY, 'by'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_BY+'-desc', 'the field to display. Empty for all'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_TITLE, 'with the title'],\n    [DontCodeModel.APP_REPORTS_DISPLAY_TITLE+'-desc', 'Enter the title of the graph or table displayed'],\n    [DontCodeModel.APP_SHARING, 'Information will be shared '],\n    [DontCodeModel.APP_SHARING+'-desc', 'List of screens'],\n    [DontCodeModel.APP_SHARING_WITH, 'with'],\n    [DontCodeModel.APP_SHARING_WITH+'-desc', 'Persons to information will be visible to.'],\n    [DontCodeModel.APP_SOURCES, 'Data will come from:'],\n    [DontCodeModel.APP_SOURCES+'-desc', 'Source of data'],\n    [DontCodeModel.APP_SOURCES_NAME, 'A source named'],\n    [DontCodeModel.APP_SOURCES_NAME+'-desc', 'Sets a name for the data source'],\n    [DontCodeModel.APP_SOURCES_TYPE, 'of type'],\n    [DontCodeModel.APP_SOURCES_TYPE+'-desc', 'How to connect to the source'],\n    [DontCodeModel.APP_SOURCES_URL, 'with the url'],\n    [DontCodeModel.APP_SOURCES_URL+'-desc', 'The url to call the service'],\n    [DontCodeModel.APP_SCREENS, 'Showing the screens'],\n    [DontCodeModel.APP_SCREENS+'-desc', 'List of screens'],\n    [DontCodeModel.APP_SCREENS_NAME, 'A screen with the name'],\n    [DontCodeModel.APP_SCREENS_NAME+'-desc', 'Name of screen'],\n    [DontCodeModel.APP_SCREENS_LAYOUT, 'and the layout'],\n    [DontCodeModel.APP_SCREENS_LAYOUT+'-desc', 'layout of the screen'],\n    [DontCodeModel.APP_COMPONENTS, 'displaying parts:'],\n    [DontCodeModel.APP_COMPONENTS+'-desc', 'List of parts'],\n    [DontCodeModel.APP_COMPONENTS_TYPE, 'A part with the type'],\n    [DontCodeModel.APP_COMPONENTS_TYPE+'-desc', 'Type of part'],\n    [DontCodeModel.APP_COMPONENTS_ENTITY, 'handling the entity'],\n    [DontCodeModel.APP_COMPONENTS_ENTITY+'-desc', 'Entity\\'s name'],\n    // Find a way for plugins to dynamically inserts label texts\n    [DontCodeModel.APP_SCREENS+'/type', 'of type'],\n    [DontCodeModel.APP_SCREENS+'/type-desc', 'Type of screen'],\n    [DontCodeModel.APP_SCREENS+'/entity', 'handling the entity'],\n    [DontCodeModel.APP_SCREENS+'/entity-desc', 'Entity\\'s name']\n  ]);\n\n  constructor() {\n    //\n  }\n\n  toText (context:string, element?:string): string {\n    let ret:string|undefined;\n    if (element) {\n      ret = this.texts.get(context+'/'+element);\n      if (!ret) {\n        ret = context+'/'+element;\n      }\n    }else {\n      ret = this.texts.get(context);\n      if (!ret)\n        ret = context;\n    }\n    return ret;\n  }\n\n}\n","import { Injectable } from \"@angular/core\";\nimport { Change, ChangeType, DontCodeModel, DontCodeSchemaItem, AbstractSchemaItem } from \"@dontcode/core\";\nimport { EditorElement, EditorElementType } from \"../../../routes/editor/editor-element\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { ChangeUpdateService } from \"../../change/services/change-update.service\";\n\n/**\n  Manages the model to be edited and as well the list of elements that informs the UI about what to display.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class TextService {\n\n  protected jsonSchema:DontCodeSchemaItem|null=null;\n\n  protected rootElement:EditorElement|null=null;\n\n  /**\n   * Stores the SchemaItem corresponding to a position in the schema\n   * For example:\n   *  'creation/entities' => The SchemaItem describing an entity\n   *  'creation/entities/fields/' => The SchemaItem describing a field in an entity\n   *  'creation/screens[type=list]/columns' => The SchemaItem describing a column of a screen when the screen type is list\n   */\n  //mapOfJson = new Map<string, DontCodeSchemaItem>();\n\n  constructor(protected http:HttpClient) {\n\n  }\n\n\n  resetSchema () {\n    this.rootElement=null;\n    //this.mapOfJson.clear();\n    //this.updateService.pushChange(new Change(ChangeType.RESET, DontCodeModel.ROOT,null));\n  }\n\n  /**\n   * Read the schema to integrate it in the list\n   * @param schemaAsJson\n   */\n  readSchema (schemaAsJson:DontCodeSchemaItem) {\n    this.jsonSchema = schemaAsJson;\n    const rootSchema= AbstractSchemaItem.goto(schemaAsJson, DontCodeModel.ROOT);\n    if( rootSchema) {\n      this.rootElement = EditorElement.createNew(\n        DontCodeModel.ROOT, DontCodeModel.ROOT,\n        EditorElementType.label, rootSchema);\n    }\n  }\n\n  getRootElement (): EditorElement {\n    if (!this.rootElement) throw new Error('No root elements to return');\n    return this.rootElement;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule\n  ]\n})\nexport class TextModule { }\n","export const environment = {\n  production: false,\n  previewUrl: 'https://dont-code.net/preview-ui/next',\n  //repositoryUrl: 'assets/repositories/next.json'\n  repositoryUrl: 'https://test.dont-code.net/demo/repository-next.json'\n\n};\n\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["HttpClient","ChangeDetectorRef","Injector","CommonConfigService","DONT_CODE_CORE","LightAppComponent","environment","i0","AppComponent","constructor","configService","httpClient","injector","ref","dontCodeCore","defaultRepositoryUrl","runtimeConfig","window","dontCodeConfig","repositoryUrl","mainTab","location","hash","indexOf","selectors","features","decls","vars","consts","template","BrowserModule","BrowserAnimationsModule","LayoutModule","EditorModule","RouterModule","MainEditorComponent","HttpClientModule","ListChangesComponent","DevModule","WelcomeModule","WelcomeComponent","BasicModule","FieldsModule","ConfirmationService","RestModule","PluginCommonModule","ReportModule","CommerceModule","appRoutes","path","component","loadChildren","then","m","ProjectModule","AppModule","bootstrap","imports","forRoot","enableTracing","useHash","declarations","CommonModule","MainComponent","MenuModule","ButtonModule","ToolbarModule","SidebarModule","MenuComponent","TooltipModule","OverlayPanelModule","exports","combineLatest","Subscription","map","TextService","ChangeUpdateService","Change","ChangeType","DontCodeModel","dtcde","ProjectService","service","updateService","projectService","subscriptions","add","getUpdates","subscribe","next","newConfig","changed","ideWebSocketUrl","serverUrl","markForCheck","detectChanges","ngOnInit","sidePanelVisible","context$","getConnectionStatus","getSessionId","pipe","status","sessionId","loadSchema","logoClicked","sidePanelVisibleChanged","$event","target","visible","resetSchema","readSchema","getSchemaManager","getSchema","length","pushChange","RESET","ROOT","newCurrentProject","openDevUrl","open","openPreview","previewUrl","connectedClass","ctx","ngOnDestroy","unsubscribe","Array","label","items","icon","routerLink","TableModule","ChangeListenService","changeService","listOfChanges","getListOfChanges","getChangeEvents","value","type","inputs","title","AbstractSchemaItem","DontCodeModelManager","DontCodeSchemaRef","EditorElement","id","schemaItem","position","schemaPosition","Map","schemaModel","split","join","createNew","listValues","initialValue","asArray","ret","values","editedValue","getParent","parent","setParent","newParent","isAsArray","isHidden","isReadonly","getItemIdIfExists","EditorElementType","array","substring","lastIndexOf","getChildrenToDisplay","forceRead","childrenToDisplay","readSubSchema","undefined","isObject","isArray","model","mergeStartPosition","mergePosition","cache","allChildren","children","itemKey","hasOwnProperty","push","getNextId","childModel","getChildren","propKey","forEach","resolveRefs","propName","child","childPosition","schemaChildPosition","newElement","get","isValue","input","isEnum","asEnum","list","getValues","object","console","error","setEditedValue","mergeElement","hasActiveProperties","toAddProps","getActiveProperties","propValue","getRelativeId","isReplacementActive","entity","isReference","toFind","getReference","found","goto","calculateRootSchema","childrenKeys","Set","keys","generateNextKey","addSubElement","removeElement","item","index","parentList","splice","upElement","downElement","getEditedValue","newVal","oldValue","props","getProperties","oldProp","delete","isReplace","after","key","i","Error","set","foundAt","alreadyThere","getChild","getChildInHierarchy","beforeAName","propNames","current","ArrayAction","TextHandlerComponent","TextElementComponent","SelectElementComponent","SharedModule","InputElementComponent","SubTextElementComponent","AccordionModule","DropdownModule","InputTextModule","FormsModule","AutoCompleteModule","onChange","event","element","UPDATE","changeListener","textService","unsubscriber","change","rootElement","getRootElement","creation","EventEmitter","calculateOptionValue","option","refresh","emit","filterGroupedElements","filteredGroups","defaultGroup","selectItem","selectedCount","query","toLowerCase","optgroup","getLabel","filter","getValue","filteredElements","outputs","SimpleChanges","addElement","removed","DELETE","oldPos","nextElement","nextKey","MOVE","ngOnChanges","changes","listOfElements","styles","CardModule","BadgeModule","ChangeModule","BroadcastChannel","DontCodeChangeManager","ReplaySubject","changeMgr","channel","CHANNEL_CHANGE_NAME","log","onmessage","msg","changeEmitter","resetEmitter","newReplay","observers","factory","providedIn","Message","MessageType","webSocket","debug","socketChanged","currentSocketUrl","ideServicesWebSocket","closed","complete","connectionStatus","sessionIdSubject","openWebSocket","Promise","resolve","socketUrl","reject","config","url","closeObserver","openObserver","err","asObservable","newId","newChange","postMessage","updateSocket","CHANGE","socket","LocaleService","LocaleDescPipe","locale","transform","args","toText","pure","LocalePipe","TypeOfPipe","DontCodeProject","IdeProject","firstValueFrom","Observable","throwError","http","currentProject","projectApiUrl","loadListOfProjects","newProjects","projects","placeCurrentProject","findIndex","_id","saveCurrentProject","toSave","getModelManager","getContent","content","put","name","responseType","post","loadProject","prj","setCurrentProject","loadAndSetCurrentProject","getCurrentProject","isCurrentProject","TextModule","APP_TYPE","APP_NAME","APP_ENTITIES","APP_ENTITIES_FROM","APP_ENTITIES_NAME","APP_FIELDS","APP_FIELDS_NAME","APP_FIELDS_TYPE","APP_REPORTS","APP_REPORTS_TITLE","APP_REPORTS_FOR","APP_REPORTS_GROUP","APP_REPORTS_GROUP_OF","APP_REPORTS_GROUP_SHOW","APP_REPORTS_GROUP_LABEL","APP_REPORTS_GROUP_AGGREGATE","APP_REPORTS_GROUP_AGGREGATE_OPERATION","APP_REPORTS_GROUP_AGGREGATE_OF","APP_REPORTS_GROUP_AGGREGATE_LABEL","APP_REPORTS_SORT","APP_REPORTS_SORT_BY","APP_REPORTS_SORT_DIRECTION","APP_REPORTS_DISPLAY","APP_REPORTS_DISPLAY_TYPE","APP_REPORTS_DISPLAY_OF","APP_REPORTS_DISPLAY_BY","APP_REPORTS_DISPLAY_TITLE","APP_SHARING","APP_SHARING_WITH","APP_SOURCES","APP_SOURCES_NAME","APP_SOURCES_TYPE","APP_SOURCES_URL","APP_SCREENS","APP_SCREENS_NAME","APP_SCREENS_LAYOUT","APP_COMPONENTS","APP_COMPONENTS_TYPE","APP_COMPONENTS_ENTITY","context","texts","DontCodeSchemaItem","schemaAsJson","jsonSchema","rootSchema","production","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}